{% set workshop_title = '' %}{% set workshop_image_file = '' %}{% set workshop_image_media = '' %}{% set workshop_tag = '' %}{% set workshop_content = '' %}{% set workshop_image_width  = page.header.header_image_width|defined(200) %}{% set workshop_image_height = page.header.header_image_height|defined(200) %}{% set location_title = '' %}{% set location_icon = '' %}{% set location_address = '' %}{% set location_area = '' %}{% set tag_classes = '' %}{% for type in page.find('/workshop_types').children if type.folder == page.header.workshop_type %}  {% set workshop_title = type.title %}  {% set workshop_image = type.header.image|defined(true) %}  {% set workshop_image_file = type.header.image %}  {% set workshop_image_media = type.media.images|first %}  {% set workshop_content = type.content %}  {% set workshop_tag = type.taxonomy.tag %}{% endfor %}{% if workshop_tag %}  {% set tag_classes = [] %}  {% for tag in workshop_tag %}    {% set tag_classes = tag_classes|merge(["tag-%s"|format(tag|replace(' ', '-'))]) %}  {% endfor %}  {% set tag_classes = tag_classes|join(' ') %}{% endif %}{% for location in page.find('/locations').children if location.folder == page.header.location %}  {% set location_title = location.title %}  {% set location_icon = location.header.icon %}  {% set location_address = location.header.address %}  {% set location_area = location.header.area %}{% endfor %}<!-- Workshop Card -->{% if page.header.link %}  {% if page.header.continue_link is not sameas(false) %}    {% set page_link = '#' %}  {% endif %}{% else %}  {% set page_link = page.url %}{% endif %}<div class="ui item element-item {{tag_classes}}">  <!-- Workshop images-->  {% if workshop_image_media and location_title %}  <div class="ui slide masked reveal image">    {{ workshop_image_media.cropZoom(workshop_image_width, workshop_image_height).html( workshop_title, workshop_title, 'visible content') }}    {{'<img src="https://maps.googleapis.com/maps/api/staticmap?key=%s&markers=%s,%s&size=%sx%s&zoom=14" title="%s" class="hidden content"/>'|format(config.site.googlemapsstatickey, location_title|url_encode, location_address|url_encode, workshop_image_width, workshop_image_height, location_address)}}  </div>  {% else %} <!-- no images, oops -->  <div class="image">    <img>  </div>  {% endif %}  <!-- Workshop title, date & location-->  <div class="content">    <div class="header">    {% if page_link is not sameas('#') %}      <a href={{ page_link }}>{{ workshop_title }}</a>    {% else %}      {{ workshop_title }}    {% endif %}    </div>    <div class="meta">      <i class="fa fa-clock-o"></i>      {{ page.date|date("d") }} {{ page.date|date("M") }} @ {{ page.date|date("g") }}:00{{ page.date|date("a") }}    </div>    {% if workshop_tag %}    <div class="extra">      {% endif %}      <div class="meta">        {% if location_icon %}<i class="fa fa-2x fa-{{ location_icon }}"></i>        <a href={{"http://maps.google.com/?q=%s,%s"|format(location_title|url_encode, location_address|url_encode)}} target="_blank">          @ {{ location_title }}, {{ location_area }} <i class="fa fa-external-link"></i>        </a>      </div>      <div class="ui divider header">      </div>        <!--Workshop tags-->      <i class="fa fa-tags"></i>      <div class="ui horizontal bulleted link list">      {% for tag in workshop_tag %}        <span class="item" href="{{ list.url|rtrim('/') }}/tag{{ config.system.param_sep }}{{ tag }}">          {{tag}}        </span>      {% endfor %}      </div>    </div>    {% endif %}    <!-- Call to action button -->    <button class="ui button primary">      <i class="fa fa-user-plus"></i>      Sign up    </button>  </div> <!-- close content --></div> <!-- close item -->